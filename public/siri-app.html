<html>

<head>
  <meta charset="utf-8">
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <script src='https://chaichana.org/siri/util.js?555'></script>
</head>

<body>
  <button onclick='SiriAuth.auth(cb)'>Auth</button> 
  &nbsp;&nbsp;&nbsp;
  <button onclick='SiriAuth.logout(cb2)'>Logout</button> 
  <br/>
  <div id='log'></div>
  <script>
    function cb(e) {
      document.getElementById('log').innerHTML='session : '+JSON.stringify(e);
    }
    function cb2(e) {
      document.getElementById('log').innerHTML='done logout';
    }
    document.addEventListener("DOMContentLoaded", function (e) {
      SiriAuth.init(cb);
    });
    var hidden, visibilityChange;
    if (typeof document.hidden !== "undefined") {
      hidden = "hidden";
      visibilityChange = "visibilitychange";
    } else if (typeof document.msHidden !== "undefined") {
      hidden = "msHidden";
      visibilityChange = "msvisibilitychange";
    } else if (typeof document.webkitHidden !== "undefined") {
      hidden = "webkitHidden";
      visibilityChange = "webkitvisibilitychange";
    }
    if (typeof document.addEventListener === "undefined" || hidden === undefined) {
    } else {
      document.addEventListener(visibilityChange, handleVisibilityChange, false);
    }
    function handleVisibilityChange() {
      SiriAuth.init(cb);
    }
  </script>
</body>

</html>
